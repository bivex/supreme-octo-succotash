# üöÄ –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

## –û–±–∑–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

–°–æ–∑–¥–∞–Ω –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ API
supreme-octo-succotash.

### üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. **`load_test_with_profiling.py`** - –ë–∞–∑–æ–≤—ã–π –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —Ç–µ—Å—Ç —Å –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º
2. **`stress_test_analyzer.py`** - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∞–Ω–∞–ª–∏–∑–æ–º
3. **`analyze_profile.py`** - –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. **`run_performance_tests.py`** - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
5. **`system_monitor.py`** - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
6. **`test_pool_monitor.py`** - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
7. **`LOAD_TESTING_README.md`** - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (3 –º–∏–Ω—É—Ç—ã)

### –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
python main_clean.py
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
python run_performance_tests.py
```

### –®–∞–≥ 3: –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

- **–ö–æ–Ω—Å–æ–ª—å**: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
- **system_metrics.json**: –ú–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã
- **system_monitor.png**: –ì—Ä–∞—Ñ–∏–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
- **stress_test_results.png**: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∞

---

## üìä –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. `run_performance_tests.py` - –ì–ª–∞–≤–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –°–æ–±–∏—Ä–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
python run_performance_tests.py
```

### 2. `load_test_with_profiling.py` - –ë–∞–∑–æ–≤—ã–π –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —Ç–µ—Å—Ç

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**

- 10 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤–æ—Ä–∫–µ—Ä–æ–≤
- 10 RPS –Ω–∞ –≤–æ—Ä–∫–µ—Ä (100 RPS total)
- 30 —Å–µ–∫—É–Ω–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ Python –∫–æ–¥–∞

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

```python
NUM_WORKERS = 5         # –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤–æ—Ä–∫–µ—Ä—ã
RPS_PER_WORKER = 10     # RPS –Ω–∞ –≤–æ—Ä–∫–µ—Ä
TEST_DURATION = 30      # –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Å–µ–∫)
```

### 3. `stress_test_analyzer.py` - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç

**–°—Ü–µ–Ω–∞—Ä–∏–∏:**

- **Light Load**: 2√ó5 RPS = 10 RPS
- **Medium Load**: 5√ó10 RPS = 50 RPS
- **Heavy Load**: 10√ó20 RPS = 200 RPS
- **Extreme Load**: 20√ó50 RPS = 1000 RPS

**–í—ã–≤–æ–¥:**

- –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ì—Ä–∞—Ñ–∏–∫–∏ —Ç—Ä–µ–Ω–¥–æ–≤
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 4. `system_monitor.py` - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤

**–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç:**

- CPU usage (%)
- Memory usage (%)
- Network I/O (MB)
- Active connections
- Disk usage

**–í—ã–≤–æ–¥:**

- system_metrics.json
- system_monitor.png

### 5. `analyze_profile.py` - –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è

**–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç:**

- .pstat —Ñ–∞–π–ª—ã –∏–∑ PyCharm
- –£–∑–∫–∏–µ –º–µ—Å—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ bottlenecks

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å API

| –ú–µ—Ç—Ä–∏–∫–∞      | –û—Ç–ª–∏—á–Ω–æ | –•–æ—Ä–æ—à–æ | –ü—Ä–∏–µ–º–ª–µ–º–æ | –ü–ª–æ—Ö–æ |
|--------------|---------|--------|-----------|-------|
| Success Rate | ‚â•99%    | ‚â•95%   | ‚â•90%      | <90%  |
| P95 Response | ‚â§0.5s   | ‚â§1.0s  | ‚â§2.0s     | >2.0s |
| RPS          | ‚â•1000   | ‚â•500   | ‚â•100      | <100  |

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

| –†–µ—Å—É—Ä—Å | –û—Ç–ª–∏—á–Ω–æ | –•–æ—Ä–æ—à–æ | –ü—Ä–∏–µ–º–ª–µ–º–æ | –ü–ª–æ—Ö–æ |
|--------|---------|--------|-----------|-------|
| CPU    | <50%    | <70%   | <85%      | >95%  |
| Memory | <70%    | <80%   | <90%      | >95%  |

---

## üîç –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –¢–∏–ø–∏—á–Ω—ã–µ bottlenecks:

1. **I/O –æ–ø–µ—Ä–∞—Ü–∏–∏** (93% –≤—Ä–µ–º–µ–Ω–∏ - –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ)
2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
3. **CPU** - —Ç—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
4. **–ü–∞–º—è—Ç—å** - —É—Ç–µ—á–∫–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

#### 1. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
# Redis cache
cache = redis.Redis()
@app.cache.memoize(timeout=300)
def get_campaign_analytics(campaign_id):
    # Heavy computation here
    pass
```

#### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î

```sql
-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_events_campaign_created
ON events(campaign_id, created_at);

-- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
SELECT * FROM events
WHERE campaign_id = $1
ORDER BY created_at DESC
LIMIT 100;
```

#### 3. Connection Pool

```python
# –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—É–ª–∞ –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
pool = psycopg2.pool.SimpleConnectionPool(
    minconn=5,
    maxconn=100,  # –£–≤–µ–ª–∏—á–µ–Ω–æ
    host="localhost",
    database="db"
)
```

---

## üìà –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∞–Ω–∞–ª–∏–∑

### –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ production:

```python
# –í—ã–±–æ—Ä–æ—á–Ω–æ–µ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
if response_time > 1.0:
    profiler = cProfile.Profile()
    profiler.enable()
    # –ö–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏
    profiler.disable()
    # –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É –∞–Ω–∞–ª–∏–∑–∞
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

```python
# Prometheus –º–µ—Ç—Ä–∏–∫–∏
from prometheus_client import Counter, Histogram

REQUEST_COUNT = Counter('requests_total', 'Total requests')
REQUEST_LATENCY = Histogram('request_duration', 'Request latency')
```

### A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:

```python
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π
@route('/campaigns/<id>')
def get_campaign(id):
    # –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è
    # return slow_version(id)

    # –ù–æ–≤–∞—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
    return cached_version(id)
```

---

## üö® Troubleshooting

### –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã
netstat -ano | findstr :5000

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
python main_clean.py 2>&1 | tee server.log
```

### –ù–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
python system_monitor.py

# –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
python -m cProfile -o profile.pstat load_test_with_profiling.py
python analyze_profile.py
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ë–î:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
python test_pool_monitor.py

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã
python -c "
import psycopg2
conn = psycopg2.connect('...')
cursor = conn.cursor()
cursor.execute('EXPLAIN ANALYZE SELECT * FROM campaigns LIMIT 10')
print(cursor.fetchall())
"
```

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

1. –ó–∞–ø—É—Å–∫–∞—Ç—å `run_performance_tests.py` –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –±–∞–∑–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

### –î–ª—è staging/production:

1. –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏ `stress_test_analyzer.py`
2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–µ–Ω–¥–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
3. A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

### –î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ bottlenecks
2. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏
3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –Ω–∞ staging

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç**: `python run_performance_tests.py`
2. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏** —Å–µ—Ä–≤–µ—Ä–∞
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã**: `python system_monitor.py`
4. **–ò–∑—É—á–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: `python analyze_profile.py`

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `LOAD_TESTING_README.md`

---

*–≠—Ç–æ—Ç –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ API –∏ –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ
—Ä–µ—à–µ–Ω–∏—è –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é!* üöÄ‚ú®
